---
tasks:
  ij-ce-internal-stable:
    name: Intellij CE Internal Stable
    platform: ubuntu1804
    build_flags:
      - --define=ij_product=intellij-latest
    build_targets:
      - //ijwb/...
    test_flags:
      - --define=ij_product=intellij-latest
      - --test_output=errors
    test_targets:
      - //:ijwb_ce_tests
  ij-ce-internal-beta:
    name: Intellij CE Internal Beta
    platform: ubuntu1804
    build_flags:
      - --define=ij_product=intellij-beta
    build_targets:
      - //ijwb/...
    test_flags:
      - --define=ij_product=intellij-beta
      - --test_output=errors
    test_targets:
      - //:ijwb_ce_tests
  ij-ce-internal-canary:
    name: Intellij CE Internal Canary
    platform: ubuntu1804
    build_flags:
      - --define=ij_product=invalid-product
    build_targets:
      - //ijwb/...
    test_flags:
      - --define=ij_product=invalid-product
      - --test_output=errors
    test_targets:
      - //:ijwb_ce_tests
    soft_fail:
      - exit_status: 1
